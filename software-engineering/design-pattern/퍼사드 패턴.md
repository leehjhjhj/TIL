# 퍼사드 패턴

![alt text](image/7/image.png)

- 퍼사드 패턴(Facade Pattern)은 복잡한 시스템의 인터페이스를 단순화하여 사용자가 쉽게 접근할 수 있도록 도와주는 구조적 디자인 패턴
- 여러 개의 클래스나 서브시스템을 통합하여 간단한 인터페이스를 제공함으로써, 클라이언트가 시스템의 내부 구조를 몰라도 쉽게 사용할 수 있게 해준다.

> 여담으로 Facade는 건축물의 정면을 의미하여, 건축물의 정면만 봐도 이 건물이 이떤 건물이고, 목적은 무엇인지 한번에 알 수 있다는 의미에서 가져왔다.

## Go 예시 코드

```go
package main

import "fmt"

// 서브시스템 클래스들
type Amplifier struct{}
func (a *Amplifier) On() {
    fmt.Println("Amplifier on")
}
func (a *Amplifier) Off() {
    fmt.Println("Amplifier off")
}

type DVDPlayer struct{}
func (d *DVDPlayer) On() {
    fmt.Println("DVD Player on")
}
func (d *DVDPlayer) Play(movie string) {
    fmt.Println("Playing movie:", movie)
}
func (d *DVDPlayer) Stop() {
    fmt.Println("Stopping movie")
}
func (d *DVDPlayer) Off() {
    fmt.Println("DVD Player off")
}

type Projector struct{}
func (p *Projector) On() {
    fmt.Println("Projector on")
}
func (p *Projector) Off() {
    fmt.Println("Projector off")
}

// 퍼사드 클래스
type HomeTheaterFacade struct {
    amp      *Amplifier
    dvd      *DVDPlayer
    projector *Projector
}

func NewHomeTheaterFacade(amp *Amplifier, dvd *DVDPlayer, projector *Projector) *HomeTheaterFacade {
    return &HomeTheaterFacade{amp: amp, dvd: dvd, projector: projector}
}

func (h *HomeTheaterFacade) WatchMovie(movie string) {
    fmt.Println("Get ready to watch a movie...")
    h.projector.On()
    h.amp.On()
    h.dvd.On()
    h.dvd.Play(movie)
}

func (h *HomeTheaterFacade) EndMovie() {
    fmt.Println("Shutting movie theater down...")
    h.dvd.Stop()
    h.amp.Off()
    h.projector.Off()
}

// 클라이언트 코드
func main() {
    amp := &Amplifier{}
    dvd := &DVDPlayer{}
    projector := &Projector{}
    
    homeTheater := NewHomeTheaterFacade(amp, dvd, projector)

    homeTheater.WatchMovie("Inception")
    homeTheater.EndMovie()
}

```

- 예시는 집에서 영화를 보려고 할 때, 준비를 하는 과정을 설명한다.
- 영화를 보기 위해서는 앰프를 키고, DVD플레이어와 프로젝터를 켜야 한다.
- 즉, 여기서는 `Amplifier`, `DVDPlayer`, `Projector`는 각각의 기능을 가진 서브시스템 클래스이다.
- `HomeTheaterFacade`는 서브 시스템 클래스를 조합하여 클라이언트가 해당 클래스만 사용하여 영화를 볼 수 있는 간단한 인터페이스를 제공한다.
- 만약에 퍼사드 패턴을 사용하지 않으면, 클라이언트는 각 서브시스템 클래스를 직접 인스턴스화하고 메서드를 호출하여, 복잡해진다.
- 즉, 개발자가 실수할 가능성이 커진다.

```go
func main() {
    // 각 서브시스템을 직접 인스턴스화하고 메서드를 호출하는 경우
    amp := &Amplifier{}
    dvd := &DVDPlayer{}
    projector := &Projector{}

    // 영화를 보기 위해 필요한 모든 단계를 직접 수행해야 함
    fmt.Println("Get ready to watch a movie...")
    projector.On()   // 프로젝터 켜기
    amp.On()         // 앰프 켜기
    dvd.On()         // DVD 플레이어 켜기
    dvd.Play("Inception") // 영화 재생

    // 영화를 본 후 종료하는 단계
    fmt.Println("Shutting movie theater down...")
    dvd.Stop()       // 영화 정지
    amp.Off()        // 앰프 끄기
    projector.Off()  // 프로젝터 끄기
}
```

## Trade Off

- 장점
    - 코드의 가독성 향상
    - 유지보수 용이: 서브시스템의 변경이 클라이언트 코드에 미치는 영향을 최소화
    - 의존성 감소: 클라이언트는 서브시스템에 직접 의존하지 않고 퍼사드에 의존
- 단점
    - 복잡성
    - 추가적인 코드