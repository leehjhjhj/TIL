# SQL 공유 및 재사용

## 소프트 파싱 vs 하드 파싱

- 라이브러리 캐시: SQL 파싱, 최적화, 로우 소스 생성을 통해 생성된 내부 프로시저를 반복 재사용할 수 있도록 캐싱하는 메모리 공간
- 이는 `SGA` 구성요소
    - 서버 프로세스와 백그라운드 프로세스가 공통으로 액세스하는 데이터와 제어구조를 캐싱하는 메모리 공간
- 소프트 파싱: SQL 파싱 이후 SQL을 캐시에서 찾아 바로 실행 단계
- 하드 파싱: 찾지 못해서 최적화, 로우 소스 생성까지 진행

### 최적화 과정은 왜 Hard 한가?

- 다섯 개의 테이블을 조인하는 쿼리문 하나도 조인 순서만 120가지의 경우의 수가 생김
- 그래서 하드 파싱은 CPU를 많이 소비

## 바인드 변수의 중요성

### 이름 없는 SQL 문제

- 함수나 프로시저, 트리거, 패키지는 생성 시 이름을 갖는다.
- 하지만 SQL은 자체가 이름이다.
    - 한 글자가 바뀌어도 새로운 객체가 생성되기 때문
    - SQL ID를 갖고 있는 데이터베이스도 일대 일 대응이다.
- 따라서 SQL은 영구 저장하지 않고 라이브러리 캐시에 적재

### 공유 가능 SQL

- 의미적으로 모두 같지만 대문자, 테이블명 기재 여부 만으로도 각각의 최적화를 진행
- 즉 바인드 변수를 사용해서 프로시저를 하나만 만들고 이를 재사용한다

```sql
SELECT * FROM CUSTOMER WHERE LOGIN_ID :1
```

