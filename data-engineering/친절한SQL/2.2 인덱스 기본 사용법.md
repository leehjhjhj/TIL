# 인덱스 기본 사용법

## 인덱스를 사용한다는 것

- 인덱스를 정상적으로 사용한다 = 리프 블록 일부만 스캔하는 `Index Range Scan`을 의미
- 인덱스 컬럼을 가공하지 않아야 한다

## 인덱스를 Range Scan 할 수 없는 이유

- 인덱스 컬럼을 가공했을 때 정상적으로 사용할 수 없는 이유는 **인덱스 스캔 시작점을 찾을 수 없기 때문** 이다.
- Range를 사용하려면 시작점과 끝지점이 있어야 한다.

```sql
where nvl('주문수량', 0) < 100
```

```sql
where ('전화번호' = :tel_no OR '고객명' = :cust_num)
```

- 어느 한 시작지점을 바로 찾을 수 없다.
- 이 두 경우 인덱스 스캔 시작점을 알 수 없다.

```sql
where '전화번호' in (:tel_no1, :tel_no2)
```

- IN 조건은 OR 조건을 표현하는 다른 방식이다.
- 그래서 옵티마이저는 IN의 LIST 개수 만큼 Index Range Scan을 반복한다. 이를 통해 밑과 같은 효과를 낸다

```sql
select *
from '고객'
where '전화번호' = :tel_no
union all
select *
from '고객'
where '전화번호' = :tel_no2
